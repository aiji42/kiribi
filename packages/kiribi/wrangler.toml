name = "kiribi-dev"
compatibility_date = "2024-04-03"
main = "src/worker.ts"

[[d1_databases]]
binding = "KIRIBI_DB" # i.e. available in your Worker on env.DB
database_name = "kiribi-db"
database_id = "40fc2a53-40b6-4a74-b713-d5190e17477f"
migrations_dir = '../../migrations'

[[queues.producers]]
binding = "KIRIBI_QUEUE"
queue = "kiribi-queue"

[[queues.consumers]]
queue = "kiribi-queue"
max_batch_size = 10 # optional: defaults to 10
max_batch_timeout = 5 # optional: defaults to 5 seconds
max_retries = 5

[[services]]
binding = "EXAMPLE_TASK_1"
service = "example-flaky-job"

[[services]]
binding = "KIRIBI"
service = "kiribi-dev"
entrypoint = "Kiribi"

[site]
bucket = "../client/dist"
