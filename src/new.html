<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Create new job</title>
</head>
<body>
	<form action="/jobs/create">
		<dl>
			<dt><label for="binding">Binding</label></dt>
			<dd>
        <select id="binding" type="text" name="binding">
          #__options
        </select>
			</dd>
			<dt><label for="payload">Payload</label></dt>
			<dd>
				<textarea id="payload" name="payload" placeholder="{}"></textarea>
			</dd>
		</dl>
		<button type="submit">Create</button>
	</form>
	<script>
		document.querySelector('form').addEventListener('submit', function(e) {
			e.preventDefault();
			const binding = document.querySelector('select[name="binding"]').value;
			const payload = document.querySelector('textarea[name="payload"]').value;
			fetch('/jobs/create', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify({ binding, payload })
			})
		});
	</script>
</body>
</html>
